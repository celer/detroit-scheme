#!/bin/sh
#Detroit Scheme is Copyright (c) 2008 Raymond Medeiros <rm@5ess.net> All Rights Reserved, see COPYING for further details.

DT_HISTFILE=~/.detroit_history
touch $DT_HISTFILE
if [ -f detroit.jar ]
then
	if [ -x /usr/bin/rlwrap ] 
	then
		rlwrap -f $DT_HISTFILE -H $DT_HISTFILE -n -c -r java -jar detroit.jar $@ 
	else
		java -jar detroit.jar $@
	fi
elif [ -f /usr/local/lib/detroit/detroit.jar ]
then
	if [ -x /usr/bin/rlwrap ]
	then
		rlwrap -f $DT_HISTFILE -H $DT_HISTFILE -n -c -r java -jar /usr/local/lib/detroit/detroit.jar $@ 
	else
		java -jar /usr/local/lib/detroit/detroit.jar $@
	fi
else
	echo "Attempting to build..."
	ant
	if [ -f detroit.jar ]
	then
		./detroit $@
	else
		echo "Failed to build: You must have a working JDK and Ant installed!"
	fi
fi
